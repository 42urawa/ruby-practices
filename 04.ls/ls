#!/usr/bin/env ruby
# frozen_string_literal: true

def main
  names = filename
  names_aligned = horizontal_spacing(names)
  names_vertically_arranged = arrange_vertical(names_aligned)
  ls(names_vertically_arranged)
end

# 指定ディレクトリ内のファイル情報を配列として格納
def filename
  Dir.glob('*')
end

# 各ファイル名文字列長を最大値に合わせる
def horizontal_spacing(names)
  horizontal_spacing = names.map(&:length).max + 1 # 最低1文字分空ける
  names.map { |n| n.ljust(horizontal_spacing) }
end

# ファイル名配列を転置（縦並び出力用）
def arrange_vertical(names, slice_count = 3)
  row_count = names.length.quo(slice_count).ceil
  names_vertically_arranged = names.each_slice(row_count).to_a
  (row_count - names_vertically_arranged[-1].length).times { names_vertically_arranged[-1] << '' }
  names_vertically_arranged.transpose
end

# ファイル名情報を標準出力する
def ls(names_vertically_arranged)
  names_vertically_arranged.each do |name|
    name.each do |n|
      print n
    end
    puts
  end
end

main
